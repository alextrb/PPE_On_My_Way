<html>
<head>
<title>CreationWayActivityStep2.java</title>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8">
<style type="text/css">
.ln { color: #999999; font-weight: normal; font-style: normal; }
.s0 { color: rgb(0,0,128); font-weight: bold; }
.s1 { color: rgb(0,0,0); }
.s2 { color: rgb(128,128,128); font-style: italic; }
.s3 { color: rgb(0,0,255); }
.s4 { color: rgb(0,128,0); font-weight: bold; }
</style>
</head>
<BODY BGCOLOR="#ffffff">
<TABLE CELLSPACING=0 CELLPADDING=5 COLS=1 WIDTH="100%" BGCOLOR="#c0c0c0" >
<TR><TD><CENTER>
<FONT FACE="Arial, Helvetica" COLOR="#000000">
CreationWayActivityStep2.java</FONT>
</center></TD></TR></TABLE>
<pre>
<span class="s0">package </span><span class="s1">com.onmyway.ppe.ppe_onmyway; 
 
</span><span class="s0">import </span><span class="s1">android.Manifest; 
</span><span class="s0">import </span><span class="s1">android.app.PendingIntent; 
</span><span class="s0">import </span><span class="s1">android.content.Context; 
</span><span class="s0">import </span><span class="s1">android.content.Intent; 
</span><span class="s0">import </span><span class="s1">android.content.pm.PackageManager; 
</span><span class="s0">import </span><span class="s1">android.graphics.Color; 
</span><span class="s0">import </span><span class="s1">android.location.Location; 
</span><span class="s0">import </span><span class="s1">android.location.LocationListener; 
</span><span class="s0">import </span><span class="s1">android.location.LocationManager; 
</span><span class="s0">import </span><span class="s1">android.os.AsyncTask; 
</span><span class="s0">import </span><span class="s1">android.os.Build; 
</span><span class="s0">import </span><span class="s1">android.support.annotation.RequiresApi; 
</span><span class="s0">import </span><span class="s1">android.support.v4.app.ActivityCompat; 
</span><span class="s0">import </span><span class="s1">android.support.v7.app.AppCompatActivity; 
</span><span class="s0">import </span><span class="s1">android.os.Bundle; 
</span><span class="s0">import </span><span class="s1">android.view.View; 
</span><span class="s0">import </span><span class="s1">android.widget.Toast; 
 
</span><span class="s0">import </span><span class="s1">com.google.android.gms.maps.CameraUpdate; 
</span><span class="s0">import </span><span class="s1">com.google.android.gms.maps.CameraUpdateFactory; 
</span><span class="s0">import </span><span class="s1">com.google.android.gms.maps.GoogleMap; 
</span><span class="s0">import </span><span class="s1">com.google.android.gms.maps.OnMapReadyCallback; 
</span><span class="s0">import </span><span class="s1">com.google.android.gms.maps.SupportMapFragment; 
</span><span class="s0">import </span><span class="s1">com.google.android.gms.maps.model.BitmapDescriptorFactory; 
</span><span class="s0">import </span><span class="s1">com.google.android.gms.maps.model.LatLng; 
</span><span class="s0">import </span><span class="s1">com.google.android.gms.maps.model.MarkerOptions; 
</span><span class="s0">import </span><span class="s1">com.google.android.gms.maps.model.Polyline; 
</span><span class="s0">import </span><span class="s1">com.google.android.gms.maps.model.PolylineOptions; 
 
</span><span class="s0">import </span><span class="s1">org.json.JSONArray; 
</span><span class="s0">import </span><span class="s1">org.json.JSONException; 
</span><span class="s0">import </span><span class="s1">org.json.JSONObject; 
 
</span><span class="s0">import </span><span class="s1">java.io.BufferedReader; 
</span><span class="s0">import </span><span class="s1">java.io.IOException; 
</span><span class="s0">import </span><span class="s1">java.io.InputStream; 
</span><span class="s0">import </span><span class="s1">java.io.InputStreamReader; 
</span><span class="s0">import </span><span class="s1">java.io.UnsupportedEncodingException; 
</span><span class="s0">import </span><span class="s1">java.net.HttpURLConnection; 
</span><span class="s0">import </span><span class="s1">java.net.MalformedURLException; 
</span><span class="s0">import </span><span class="s1">java.net.ProtocolException; 
</span><span class="s0">import </span><span class="s1">java.net.URL; 
</span><span class="s0">import </span><span class="s1">java.util.ArrayList; 
</span><span class="s0">import </span><span class="s1">java.util.List; 
</span><span class="s0">import </span><span class="s1">java.util.regex.Pattern; 
 
</span><span class="s0">public class </span><span class="s1">CreationWayActivityStep2 </span><span class="s0">extends </span><span class="s1">AppCompatActivity </span><span class="s0">implements </span><span class="s1">LocationListener, OnMapReadyCallback, ActivityCompat.OnRequestPermissionsResultCallback{ 
 
    </span><span class="s2">//Intent</span><span class="s1"> 
    Intent intent; 
 
    </span><span class="s0">private </span><span class="s1">List&lt;LatLng&gt; wayList; 
 
    </span><span class="s0">private </span><span class="s1">View mLayout; 
 
    </span><span class="s2">//map parameter</span><span class="s1"> 
    </span><span class="s0">private </span><span class="s1">GoogleMap mMap; 
 
    </span><span class="s2">//current Location of the user</span><span class="s1"> 
    </span><span class="s0">private </span><span class="s1">Location currentLocation; 
 
    </span><span class="s2">//LocationManager</span><span class="s1"> 
    </span><span class="s0">private </span><span class="s1">LocationManager locationManager; 
 
    </span><span class="s2">//successive position put by the user</span><span class="s1"> 
    </span><span class="s0">private </span><span class="s1">List&lt;MarkerOptions&gt; checkPointList; 
 
    </span><span class="s2">// asking for the localisation of the user</span><span class="s1"> 
    </span><span class="s0">private static final int </span><span class="s1">LOCATION_REQUEST = </span><span class="s3">500</span><span class="s1">; 
 
    </span><span class="s2">//previous and new point</span><span class="s1"> 
    </span><span class="s0">private </span><span class="s1">LatLng origin; 
    </span><span class="s0">private </span><span class="s1">LatLng destination; 
 
 
    @Override 
    </span><span class="s0">protected void </span><span class="s1">onCreate(Bundle savedInstanceState) { 
        </span><span class="s0">super</span><span class="s1">.onCreate(savedInstanceState); 
        setContentView(R.layout.activity_creation_way_step2); 
        System.out.println(</span><span class="s4">&quot;debut du onCreate&quot;</span><span class="s1">); 
 
        </span><span class="s2">//initialisation of the List</span><span class="s1"> 
        wayList = </span><span class="s0">new </span><span class="s1">ArrayList&lt;&gt;(); 
        checkPointList = </span><span class="s0">new </span><span class="s1">ArrayList&lt;&gt;(); 
 
        </span><span class="s2">//We retrieve the intent</span><span class="s1"> 
        </span><span class="s0">final </span><span class="s1">Intent intent = getIntent(); 
        String result; 
        Bundle bd = intent.getExtras(); 
        </span><span class="s0">if</span><span class="s1">(bd!=</span><span class="s0">null</span><span class="s1">){ 
            wayList = intent.getParcelableArrayListExtra(</span><span class="s4">&quot;EXTRA_LIST&quot;</span><span class="s1">); 
        } 
 
        SupportMapFragment mapFragment = (SupportMapFragment) getSupportFragmentManager() 
                .findFragmentById(R.id.map); 
        mapFragment.getMapAsync((OnMapReadyCallback) </span><span class="s0">this</span><span class="s1">); 
 
        </span><span class="s2">// initialisation of the LocationManager</span><span class="s1"> 
        locationManager = (LocationManager) getSystemService(Context.LOCATION_SERVICE); 
 
        </span><span class="s0">if </span><span class="s1">(ActivityCompat.checkSelfPermission(</span><span class="s0">this</span><span class="s1">, Manifest.permission.ACCESS_FINE_LOCATION) != PackageManager.PERMISSION_GRANTED &amp;&amp; ActivityCompat.checkSelfPermission(</span><span class="s0">this</span><span class="s1">, Manifest.permission.ACCESS_COARSE_LOCATION) != PackageManager.PERMISSION_GRANTED) { 
            ActivityCompat.requestPermissions(</span><span class="s0">this</span><span class="s1">, </span><span class="s0">new </span><span class="s1">String[]{Manifest.permission.ACCESS_FINE_LOCATION}, LOCATION_REQUEST); 
            </span><span class="s0">return</span><span class="s1">; 
        } 
        currentLocation = locationManager.getLastKnownLocation(LocationManager.NETWORK_PROVIDER); 
 
        </span><span class="s2">//initialisation of the update</span><span class="s1"> 
        Intent intent2 = </span><span class="s0">new </span><span class="s1">Intent(</span><span class="s0">this</span><span class="s1">, MapsActivity.GPSUpdateReceiver.</span><span class="s0">class</span><span class="s1">); 
        PendingIntent pending = PendingIntent.getBroadcast(</span><span class="s0">this</span><span class="s1">, </span><span class="s3">0</span><span class="s1">, intent2, PendingIntent.FLAG_UPDATE_CURRENT); 
 
 
        </span><span class="s2">//initialisation of the map</span><span class="s1"> 
        </span><span class="s0">if </span><span class="s1">(mapFragment != </span><span class="s0">null</span><span class="s1">) { 
            System.out.println(</span><span class="s4">&quot;mapFrag not null&quot;</span><span class="s1">); 
            mapFragment.getMapAsync(</span><span class="s0">new </span><span class="s1">OnMapReadyCallback() { 
                @Override 
                </span><span class="s0">public void </span><span class="s1">onMapReady(GoogleMap map) { 
                    mMap = map; 
                } 
            }); 
        } </span><span class="s0">else </span><span class="s1">{ 
            Toast.makeText(</span><span class="s0">this</span><span class="s1">, </span><span class="s4">&quot;Error - Map Fragment was null!!&quot;</span><span class="s1">, Toast.LENGTH_SHORT).show(); 
        } 
        System.out.println(</span><span class="s4">&quot;fin du onCreate&quot;</span><span class="s1">); 
 
    } 
 
 
    </span><span class="s0">public void </span><span class="s1">delete(View view) { 
        </span><span class="s2">//suppression of the</span><span class="s1"> 
        </span><span class="s0">if </span><span class="s1">(checkPointList.size()&gt;=</span><span class="s3">1</span><span class="s1">){ 
            checkPointList.remove(checkPointList.size()-</span><span class="s3">1</span><span class="s1">); 
        } 
        </span><span class="s2">//clean the current map</span><span class="s1"> 
        mMap.clear(); 
        </span><span class="s2">//create new marker</span><span class="s1"> 
        </span><span class="s0">for</span><span class="s1">(</span><span class="s0">int </span><span class="s1">i = </span><span class="s3">0</span><span class="s1">; i&lt;checkPointList.size();i++){ 
            mMap.addMarker(checkPointList.get(i)); 
 
        } 
 
        </span><span class="s0">if</span><span class="s1">(wayList.size() &gt;= </span><span class="s3">2</span><span class="s1">){ 
            System.out.println(</span><span class="s4">&quot;5&quot;</span><span class="s1">); 
 
            </span><span class="s0">if</span><span class="s1">(wayList.size() &gt;= </span><span class="s3">2</span><span class="s1">){ 
                System.out.println(</span><span class="s4">&quot;5&quot;</span><span class="s1">); 
                </span><span class="s0">for </span><span class="s1">(</span><span class="s0">int </span><span class="s1">i = </span><span class="s3">1</span><span class="s1">; i &lt; wayList.size(); i++){ 
                    origin = wayList.get(i-</span><span class="s3">1</span><span class="s1">); 
                    destination = wayList.get(i); 
                    mMap.addPolyline(</span><span class="s0">new </span><span class="s1">PolylineOptions().add( 
                            origin, 
                            destination 
                    ).color(Color.argb(</span><span class="s3">255</span><span class="s1">,</span><span class="s3">255</span><span class="s1">,</span><span class="s3">153</span><span class="s1">,</span><span class="s3">51</span><span class="s1">)) 
                            .width(</span><span class="s3">15</span><span class="s1">)); 
                } 
 
            } 
 
        } 
    } 
 
    </span><span class="s0">public void </span><span class="s1">next(View view) { 
 
 
 
    } 
 
    @Override 
    </span><span class="s0">public void </span><span class="s1">onLocationChanged(Location location) { 
 
    } 
 
    @Override 
    </span><span class="s0">public void </span><span class="s1">onStatusChanged(String provider, </span><span class="s0">int </span><span class="s1">status, Bundle extras) { 
 
    } 
 
    @Override 
    </span><span class="s0">public void </span><span class="s1">onProviderEnabled(String provider) { 
        Toast.makeText(</span><span class="s0">this</span><span class="s1">, </span><span class="s4">&quot;Enable new provider&quot; </span><span class="s1">+ provider, Toast.LENGTH_SHORT).show(); 
    } 
 
    @Override 
    </span><span class="s0">public void </span><span class="s1">onProviderDisabled(String provider) { 
        Toast.makeText(</span><span class="s0">this</span><span class="s1">, </span><span class="s4">&quot;disable new provider&quot; </span><span class="s1">+ provider, Toast.LENGTH_SHORT).show(); 
    } 
 
    @Override 
    </span><span class="s0">public void </span><span class="s1">onMapReady(GoogleMap googleMap) { 
        System.out.println(</span><span class="s4">&quot;debut du onMapReady&quot;</span><span class="s1">); 
 
        mMap = googleMap; 
 
        </span><span class="s2">// enable the zoom functionality</span><span class="s1"> 
        mMap.getUiSettings().setZoomControlsEnabled(</span><span class="s0">true</span><span class="s1">); 
        mMap.getMaxZoomLevel(); 
 
        </span><span class="s2">//for the initialisation of the map</span><span class="s1"> 
        </span><span class="s0">if</span><span class="s1">(wayList !=</span><span class="s0">null</span><span class="s1">){ 
 
            </span><span class="s2">// Zoom on the position of the way</span><span class="s1"> 
            CameraUpdate cameraUpdate = CameraUpdateFactory.newLatLngZoom(wayList.get(</span><span class="s3">0</span><span class="s1">), </span><span class="s3">17</span><span class="s1">); 
            mMap.animateCamera(cameraUpdate); 
        } 
 
        </span><span class="s0">if</span><span class="s1">(wayList.size() &gt;= </span><span class="s3">2</span><span class="s1">){ 
            System.out.println(</span><span class="s4">&quot;5&quot;</span><span class="s1">); 
            </span><span class="s0">for </span><span class="s1">(</span><span class="s0">int </span><span class="s1">i = </span><span class="s3">1</span><span class="s1">; i &lt; wayList.size(); i++){ 
                origin = wayList.get(i-</span><span class="s3">1</span><span class="s1">); 
                destination = wayList.get(i); 
                mMap.addPolyline(</span><span class="s0">new </span><span class="s1">PolylineOptions().add( 
                        origin, 
                        destination 
                ).color(Color.argb(</span><span class="s3">255</span><span class="s1">,</span><span class="s3">255</span><span class="s1">,</span><span class="s3">153</span><span class="s1">,</span><span class="s3">51</span><span class="s1">)) 
                        .width(</span><span class="s3">15</span><span class="s1">)); 
            } 
 
        } 
 
        mMap.setOnMapLongClickListener(</span><span class="s0">new </span><span class="s1">GoogleMap.OnMapLongClickListener() { 
            @Override 
            </span><span class="s0">public void </span><span class="s1">onMapLongClick(LatLng latLng) { 
 
                MarkerOptions markerOptions = </span><span class="s0">new </span><span class="s1">MarkerOptions(); 
                markerOptions.position(latLng); 
 
                </span><span class="s0">boolean </span><span class="s1">find = </span><span class="s0">false</span><span class="s1">; 
                </span><span class="s2">// If the List of marker is empty</span><span class="s1"> 
                </span><span class="s0">if</span><span class="s1">(checkPointList.size()==</span><span class="s3">0</span><span class="s1">){ 
                    </span><span class="s2">//if tables are empty</span><span class="s1"> 
                    checkPointList.add(markerOptions); 
 
                }</span><span class="s0">else</span><span class="s1">{ 
                    </span><span class="s0">for</span><span class="s1">(</span><span class="s0">int </span><span class="s1">i=</span><span class="s3">0</span><span class="s1">; i &lt; checkPointList.size(); i++){ 
 
                        System.out.println(</span><span class="s4">&quot;checkPointList.get(i) &quot; </span><span class="s1">+ checkPointList.get(i)); 
                        System.out.println(</span><span class="s4">&quot;latLng &quot; </span><span class="s1">+ latLng); 
 
                        </span><span class="s2">// a refaire pour enlever le bouton delete</span><span class="s1"> 
                        </span><span class="s0">if </span><span class="s1">(checkPointList.get(i).getPosition().equals(latLng)){ 
                            System.out.println(</span><span class="s4">&quot;click on a exiting coord&quot;</span><span class="s1">); 
                            checkPointList.remove(i); 
                            find = </span><span class="s0">true</span><span class="s1">; 
                        } 
                    } 
                    </span><span class="s0">if </span><span class="s1">(find==</span><span class="s0">false</span><span class="s1">){ 
                        </span><span class="s2">//add the chekPoint to the list of checkPoint</span><span class="s1"> 
                        checkPointList.add(markerOptions); 
 
                    } 
                } 
 
                markerOptions.icon(BitmapDescriptorFactory.defaultMarker(BitmapDescriptorFactory.HUE_ORANGE)); 
                mMap.clear(); 
                </span><span class="s0">for</span><span class="s1">(</span><span class="s0">int </span><span class="s1">i = </span><span class="s3">0</span><span class="s1">; i&lt;checkPointList.size();i++){ 
                    mMap.addMarker(checkPointList.get(i)); 
 
                } 
 
                </span><span class="s0">if</span><span class="s1">(wayList.size() &gt;= </span><span class="s3">2</span><span class="s1">){ 
                    System.out.println(</span><span class="s4">&quot;5&quot;</span><span class="s1">); 
                    </span><span class="s0">for </span><span class="s1">(</span><span class="s0">int </span><span class="s1">i = </span><span class="s3">1</span><span class="s1">; i &lt; wayList.size(); i++){ 
                        origin = wayList.get(i-</span><span class="s3">1</span><span class="s1">); 
                        destination = wayList.get(i); 
                        mMap.addPolyline(</span><span class="s0">new </span><span class="s1">PolylineOptions().add( 
                                origin, 
                                destination 
                        ).color(Color.argb(</span><span class="s3">255</span><span class="s1">,</span><span class="s3">255</span><span class="s1">,</span><span class="s3">153</span><span class="s1">,</span><span class="s3">51</span><span class="s1">)) 
                                .width(</span><span class="s3">15</span><span class="s1">)); 
                    } 
 
                } 
 
 
 
            } 
        }); 
        System.out.println(</span><span class="s4">&quot;fin du onMapReady&quot;</span><span class="s1">); 
    } 
 
    @Override 
    </span><span class="s0">protected void </span><span class="s1">onResume() { 
        </span><span class="s0">super</span><span class="s1">.onResume(); 
        </span><span class="s0">if </span><span class="s1">(ActivityCompat.checkSelfPermission(</span><span class="s0">this</span><span class="s1">, Manifest.permission.ACCESS_FINE_LOCATION) != PackageManager.PERMISSION_GRANTED &amp;&amp; ActivityCompat.checkSelfPermission(</span><span class="s0">this</span><span class="s1">, Manifest.permission.ACCESS_COARSE_LOCATION) != PackageManager.PERMISSION_GRANTED) { 
            </span><span class="s2">// TODO: Consider calling</span><span class="s1"> 
            </span><span class="s2">//    ActivityCompat#requestPermissions</span><span class="s1"> 
            </span><span class="s2">// here to request the missing permissions, and then overriding</span><span class="s1"> 
            </span><span class="s2">//   public void onRequestPermissionsResult(int requestCode, String[] permissions,</span><span class="s1"> 
            </span><span class="s2">//                                          int[] grantResults)</span><span class="s1"> 
            </span><span class="s2">// to handle the case where the user grants the permission. See the documentation</span><span class="s1"> 
            </span><span class="s2">// for ActivityCompat#requestPermissions for more details.</span><span class="s1"> 
            </span><span class="s0">return</span><span class="s1">; 
        } 
        locationManager.requestLocationUpdates(LocationManager.NETWORK_PROVIDER, </span><span class="s3">400</span><span class="s1">, </span><span class="s3">1</span><span class="s1">, </span><span class="s0">this</span><span class="s1">); 
 
    } 
 
 
    @Override 
    </span><span class="s0">public void </span><span class="s1">onRequestPermissionsResult(</span><span class="s0">int </span><span class="s1">requestCode, String[] permission, </span><span class="s0">int</span><span class="s1">[] grantResults) { 
 
        System.out.println(</span><span class="s4">&quot;DEBUT DU ON PERMISSION&quot;</span><span class="s1">); 
        </span><span class="s0">if </span><span class="s1">(requestCode== LOCATION_REQUEST){ 
 
            </span><span class="s0">if </span><span class="s1">(grantResults.length &gt; </span><span class="s3">0 </span><span class="s1">&amp;&amp; grantResults[</span><span class="s3">0</span><span class="s1">] == PackageManager.PERMISSION_GRANTED) { 
                </span><span class="s2">// NOW WE HAVE TO LAUNCH THE ACTIVITY</span><span class="s1"> 
                startApp(); 
 
            }</span><span class="s0">else</span><span class="s1">{ 
                Toast.makeText(getApplicationContext(), </span><span class="s4">&quot;No localisation permission&quot;</span><span class="s1">, Toast.LENGTH_LONG).show(); 
            } 
        } 
 
    } 
 
    </span><span class="s0">private void </span><span class="s1">startApp(){ 
        Intent intent = </span><span class="s0">new </span><span class="s1">Intent(</span><span class="s0">this</span><span class="s1">, CreationWayActivity.</span><span class="s0">class</span><span class="s1">); 
        startActivity(intent); 
    } 
 
 
 
    </span><span class="s2">///////////////////////////////Thread ///////////////////////////////////////</span><span class="s1"> 
    </span><span class="s2">//to don't block th main thread</span><span class="s1"> 
</span><span class="s2">/* 
    private class LoadAllMatch extends AsyncTask&lt;String, String, String&gt; { 
 
        private Context context; 
 
        private String result; 
 
        private static final String urlListMatch = &quot;http://192.168.1.18/listMatch.php&quot;; 
 
        LoadAllMatch(Context context) { 
            this.context = context; 
        } 
 
        @Override 
        protected void onPreExecute() { 
            super.onPreExecute(); 
        } 
 
        @Override 
        protected String doInBackground(String... strings) { 
            System.out.println(&quot;oncreate 1&quot;); 
            URL url = null; 
 
            try { 
                url = new URL(urlListMatch); 
 
                System.out.println(&quot;oncreate 1&quot;); 
                HttpURLConnection httpURLConnection = (HttpURLConnection) url.openConnection(); 
                System.out.println(&quot;oncreate 1&quot;); 
                httpURLConnection.setRequestMethod(&quot;POST&quot;); 
                System.out.println(&quot;oncreate 1&quot;); 
                httpURLConnection.setDoOutput(true); 
                System.out.println(&quot;oncreate 1&quot;); 
                httpURLConnection.setDoInput(true); 
                System.out.println(&quot;oncreate ici&quot;); 
 
                InputStream inputStream = httpURLConnection.getInputStream(); 
                System.out.println(&quot;oncreate 1&quot;); 
                BufferedReader bufferedReader = new BufferedReader(new InputStreamReader(inputStream, &quot;iso-8859-1&quot;)); 
                result = &quot;&quot;; 
                String line; 
                System.out.println(&quot;oncreate 2&quot;); 
 
                while ((line = bufferedReader.readLine()) != null) { 
                    System.out.println(&quot;oncreate 3 boucle&quot;); 
                    result += line; 
                } 
                System.out.println(&quot;oncreate 4&quot;); 
                bufferedReader.close(); 
                System.out.println(&quot;oncreate 5&quot;); 
                httpURLConnection.disconnect(); 
                System.out.println(result); 
                return result; 
 
            } catch (MalformedURLException e) { 
                e.printStackTrace(); 
            } catch (UnsupportedEncodingException e) { 
                e.printStackTrace(); 
            } catch (ProtocolException e) { 
                e.printStackTrace(); 
            } catch (IOException e) { 
                e.printStackTrace(); 
            } 
            return &quot;&quot;; 
        } 
 
        @RequiresApi(api = Build.VERSION_CODES.KITKAT) 
        @Override 
        protected void onPostExecute(String s) { 
            super.onPostExecute(s); 
            result = loadAllMatch.getResult(); 
 
            //Split the result received in JSON String Object 
            String[] parts = result.split(Pattern.quote(&quot;}&quot;)); 
            String part1 = parts[0]+&quot;}&quot;; // 004 
            String part2 = parts[1]+&quot;}&quot;; // 034556 
            System.out.println(part1); 
            System.out.println(part2); 
 
            JSONArray jsonArray2 = new JSONArray(); 
            for(int i =0;i&lt;parts.length;i++){ 
                parts[i]+=&quot;}&quot;; 
                jsonArray2.put(parts[i]); 
            } 
            System.out.println(jsonArray2); 
            try { 
 
                for (int i=0;i&lt;jsonArray2.length();i++){ 
                    System.out.println(&quot;INDEX &quot; +jsonArray2.getString(i)); 
                    JSONObject obj = new JSONObject(jsonArray2.getString(i)); 
                    //JSONObject row = array.getJSONObject(i); 
                    Match match = new Match(obj.getString(&quot;joueur1&quot;),obj.getString(&quot;joueur2&quot;),obj.getString(&quot;lat_location&quot;), 
                            obj.getString(&quot;lng_location&quot;),obj.getString(&quot;club_name&quot;), 
                            obj.getString(&quot;date&quot;),obj.getString(&quot;score_joueur1&quot;),obj.getString(&quot;score_joueur2&quot;), 
                            obj.getString(&quot;duration&quot;),obj.getInt(&quot;nb_ace_joueur1&quot;),obj.getInt(&quot;nb_ace_joueur2&quot;), 
                            obj.getInt(&quot;nb_double_fault_joueur1&quot;),obj.getInt(&quot;nb_double_fault_joueur2&quot;), 
                            obj.getInt(&quot;nb_win_point_joueur1&quot;),obj.getInt(&quot;nb_win_point_joueur2&quot;), 
                            obj.getInt(&quot;nb_fault_joueur1&quot;),obj.getInt(&quot;nb_fault_joueur2&quot;)); 
                    matchList.add(match); 
 
                } 
                for(int i =0; i&lt;matchList.size();i++){ 
                    System.out.println(matchList.get(i).getClubName()); 
 
                } 
                customAdapter.notifyDataSetChanged(); 
 
 
 
 
 
            } catch (JSONException e) { 
                e.printStackTrace(); 
            } 
 
 
 
 
        } 
*/</span><span class="s1"> 
} 
</span></pre>
</body>
</html>